---
import Layout from "../../layouts/Layout.astro";
import companiesData from "../../data/companies.json";

// Robuust: werkt als companies.json een array is of in een wrapper zit
const companies =
  Array.isArray(companiesData)
    ? companiesData
    : (companiesData.companies ?? companiesData.default ?? []);

const slug = "e-luga-guesthouse";
const company = companies.find((c) => c?.slug === slug);

if (!company) {
  throw new Error(`Company '${slug}' not found in companies.json`);
}
---

<Layout title={company.name}>
  <main class="eluga">
    <!-- HERO -->
    <section class="hero">
      <div class="container">
        <span class="kicker">
          <span class="dot"></span>
          Guesthouse · Curaçao
        </span>

        <h1>{company.name}</h1>
        <p class="tagline">{company.tagline}</p>

        <p class="summary">{company.summary}</p>

        <a href={company.ctaLink} class="btn">
          {company.ctaLabel} →
        </a>
      </div>
    </section>

    <!-- HIGHLIGHTS -->
    <section class="section">
      <div class="container">
        <h2 class="section-title">Highlights</h2>

        <div class="grid">
          {company.highlights.map((item) => (
            <div class="panel">{item}</div>
          ))}
        </div>
      </div>
    </section>

    <!-- RATIONALE -->
    <section class="section soft">
      <div class="container">
        <h2 class="section-title">Waarom E Luga</h2>

        <div class="grid">
          {company.rationale.map((item) => (
            <div class="panel">{item}</div>
          ))}
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="section">
      <div class="container cta-wrap">
        <div>
          <h2 class="section-title">Contact</h2>
          <p>Vragen of beschikbaarheid checken? Neem gerust contact op.</p>
          <a href={company.ctaLink} class="btn">Bekijk mogelijkheden →</a>
        </div>

        <div class="contact">
          <div>
            <strong>E-mail</strong><br />
            {company.contact?.email}
          </div>

          <div>
            <strong>Telefoon / WhatsApp</strong><br />
            CUR: {company.contact?.phone_cur}<br />
            NL: {company.contact?.phone_nl}
          </div>

          <div>
            <strong>Adres</strong><br />
            CUR: {company.contact?.address_cur}<br />
            NL: {company.contact?.address_nl}
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
/* =========================
   E Luga – FULL PAGE BACKGROUND (force override)
   - Fix: orange underaan (Layout/global bg)
   - Fix: public gradient stopt te vroeg
   ========================= */

:global(html),
:global(body) {
  height: 100%;
  min-height: 100%;
  margin: 0;

  /* donkerder groen onderaan */
  background: linear-gradient(180deg, #fbfdfc 0%, #eefaf2 45%, #cfeedd 100%) !important;
  background-repeat: no-repeat !important;
  background-attachment: fixed !important; /* zorgt dat hij visueel altijd doorloopt */
}

/* Sommige layouts zetten een wrapper/background op body children */
:global(body > *),
:global(main),
:global(#__astro),
:global(#app),
:global(.app),
:global(.layout),
:global(.site),
:global(.page) {
  background: transparent !important;
}

/* Footer mag nooit een eigen vlak tekenen */
:global(footer),
:global(.footer),
:global(.site-footer) {
  background: transparent !important;
}

/* =========================
   Page wrapper
   ========================= */

.eluga {
  color: #23313a;
  min-height: 100vh; /* echt full height */
  padding-bottom: 2rem;
  background: transparent; /* extra zekerheid */
}

.container {
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 1.5rem;
}

/* =========================
   HERO
   ========================= */

.hero {
  padding: 3.5rem 0 2.25rem;
}

.hero .container {
  border-radius: 22px;
  padding: 2.25rem;
  border: 1px solid rgba(0, 0, 0, 0.06);

  background:
    radial-gradient(820px 420px at 15% 10%, rgba(32, 140, 84, 0.10), transparent 60%),
    radial-gradient(720px 360px at 85% 20%, rgba(226, 173, 137, 0.12), transparent 60%),
    rgba(255, 255, 255, 0.35);

  backdrop-filter: blur(10px);
}

.kicker {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255, 255, 255, 0.55);
  border: 1px solid rgba(0, 0, 0, 0.06);
  padding: 0.4rem 0.9rem;
  border-radius: 999px;
  font-size: 0.8rem;
  color: #1f6b44;
}

.dot {
  width: 0.45rem;
  height: 0.45rem;
  background: #1f8c54;
  border-radius: 50%;
}

h1 {
  font-size: 2.4rem;
  margin: 1rem 0 0.5rem;
  color: #1e2c35;
}

.tagline {
  font-size: 1.1rem;
  margin-bottom: 1rem;
  color: rgba(30, 44, 53, 0.88);
}

.summary {
  max-width: 720px;
  margin-bottom: 1.25rem;
  color: rgba(30, 44, 53, 0.78);
}

/* =========================
   SECTIONS
   ========================= */

.section {
  padding: 2.6rem 0;
}

.section.soft {
  padding-top: 2.2rem;
}

.section-title {
  margin-bottom: 1.25rem;
  font-size: 1.25rem;
  color: #1e2c35;
}

.grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
}

/* =========================
   GLASS PANELS
   ========================= */

.panel {
  background: rgba(255, 255, 255, 0.16);
  border: 1px solid rgba(0, 0, 0, 0.04);
  border-radius: 18px;
  padding: 1rem;

  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
  backdrop-filter: blur(8px);
}

/* =========================
   CONTACT BLOCK
   ========================= */

.cta-wrap {
  display: grid;
  gap: 2rem;
  grid-template-columns: 1fr 1fr;

  background: rgba(255, 255, 255, 0.16);
  border: 1px solid rgba(0, 0, 0, 0.04);
  border-radius: 26px;
  padding: 2rem;

  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.03);
  backdrop-filter: blur(10px);
}

.contact div {
  margin-bottom: 0.9rem;
  color: rgba(30, 44, 53, 0.78);
}

.contact strong {
  color: rgba(30, 44, 53, 0.92);
}

/* =========================
   BUTTON
   ========================= */

.btn {
  display: inline-block;
  margin-top: 1rem;
  background: #1f8c54;
  color: #fff;
  padding: 0.75rem 1.35rem;
  border-radius: 999px;
  font-weight: 700;
  font-size: 0.85rem;
  text-decoration: none;

  box-shadow: 0 8px 18px rgba(31, 140, 84, 0.22);
}

.btn:hover {
  background: #187246;
}

/* =========================
   Responsive
   ========================= */

@media (max-width: 860px) {
  .cta-wrap {
    grid-template-columns: 1fr;
  }

  .hero .container {
    padding: 1.6rem;
  }
}
</style>
